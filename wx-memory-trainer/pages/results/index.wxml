<view class="container">
  <view class="title">训练成绩</view>

  <view class="card">
    <view class="card-title">整体概览</view>
    <view class="overview-line">累计训练：{{summary.totalSessions}} 次 · 覆盖 {{summary.trainingDays}} 天</view>
    <view class="overview-line">连续训练：{{summary.streak.current}} 天（历史最佳 {{summary.streak.best}} 天）</view>
    <view class="overview-line" wx:if="{{summary.lastTraining}}">最近训练：{{summary.lastTraining}}</view>
    <view class="overview-line" wx:else>最近训练：暂无记录</view>
  </view>

  <view class="card">
    <view class="card-title">各项目最近表现</view>
    <view class="stats-grid" wx:if="{{summary.totalSessions}}">
      <block wx:for="{{summary.games}}" wx:key="key">
        <view class="stat-item">
          <view class="stat-label">{{item.label}}</view>
          <view class="stat-text">{{item.summaryText}}</view>
          <view class="stat-text">{{item.metricText}}</view>
          <view class="stat-highlight">{{item.highlightText}}</view>
          <view class="stat-text" wx:if="{{item.extraText}}">{{item.extraText}}</view>
          <view class="stat-detail">{{item.detailText}}</view>
        </view>
      </block>
    </view>
    <view class="subtitle" wx:else>暂无训练记录，完成一轮训练后即可查看概览。</view>
  </view>

  <view class="title">最近训练记录</view>

  <view class="card">
    <view class="card-title">数字序列（{{digitHistory.length}} 条）</view>
    <block wx:for="{{digitHistory}}" wx:key="ts">
      <view class="row-line">
        <view>{{item.time}}</view>
        <view>{{item.mode}} 长度 {{item.length}} · {{item.success?'成功':'失败'}}</view>
      </view>
    </block>
    <view wx:if="{{!digitHistory.length}}" class="subtitle">暂无记录</view>
  </view>

  <view class="card">
    <view class="card-title">N-Back（{{nbackHistory.length}} 条）</view>
    <block wx:for="{{nbackHistory}}" wx:key="ts">
      <view class="row-line">
        <view>{{item.time}}</view>
        <view>N={{item.n}} · {{item.mode}} · {{item.acc}}%（{{item.correct}}/{{item.total}}）</view>
      </view>
    </block>
    <view wx:if="{{!nbackHistory.length}}" class="subtitle">暂无记录</view>
  </view>

  <view class="card">
    <view class="card-title">Simon（{{simonHistory.length}} 条）</view>
    <block wx:for="{{simonHistory}}" wx:key="ts">
      <view class="row-line">
        <view>{{item.time}}</view>
        <view>长度 {{item.length}} · {{item.success?'成功':'失败'}}</view>
      </view>
    </block>
    <view wx:if="{{!simonHistory.length}}" class="subtitle">暂无记录</view>
  </view>

  <view class="card">
    <view class="card-title">空间序列（{{spatialHistory.length}} 条）</view>
    <block wx:for="{{spatialHistory}}" wx:key="ts">
      <view class="row-line">
        <view>{{item.time}}</view>
        <view>{{item.grid}}×{{item.grid}} 长度 {{item.length}} · {{item.success?'成功':'失败'}}</view>
      </view>
    </block>
    <view wx:if="{{!spatialHistory.length}}" class="subtitle">暂无记录</view>
  </view>
</view>
